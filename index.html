<html>

<head>
	<title>Quad City Weather Watch</title>
	<meta name="title" content="Quad City Weather Watch" />
	<meta name="description" content="Weather reports, forecasts, radar, event/school cancellations, and road conditions for the Quad Cities - all in one place!" />
	<meta property="og:image" content="http://QCWeatherWatch.com/banner.jpg" />
	<link rel="shortcut icon" href="http://QCWeatherWatch.com/favicon.ico" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name=viewport content="width=device-width, initial-scale=1, user-scalable=yes">
	<script src="jquery.js"></script>
<style>
html, body {
	font-family:arial;
	background-color:#224E97;
  width:100vw !important;
}
h1 {
	text-decoration:underline;
}
h3 {
	text-decoration:underline;
	text-align:center;
	margin:5px;
	padding:0;
}
.title, .subhead { color:white; }
#layout {
	border:1px solid black;
	border-collapse:collapse;
}
#layout td {
	vertical-align:top;
	border:1px solid #ccc;
	padding:5px;
	background-color:#eee;
}
div.kwqc p {
	text-align:left;
}
#kwqc_closings table {
	border-collapse:collapse;
}
#kwqc_closings h3 {
	font-size:11px;
}
#kwqc_closings th {
	background-color:#ccc;
}
#kwqc_closings td, #kwqc_closings th {
	font-size:12px;
	border:1px solid #ccc;
}
.closings {
	font-size:12px;
}
.block {
	
	max-width:95vw !important;
	float:left;
	border:1px solid #ccc;
}
img {
  max-width:98vw !important;
}
.overflow { overflow:visible; height:auto !important; }
@media screen and (min-width:1200px) {
  .overflow {
    height:450px;
    overflow:auto;
  }
}
@media screen and (max-width:600px) {
  #forecast_embed { display:none; }
}
</style>
<script>
$(function() {
	$.get('https://8xd8ar771c.execute-api.us-east-1.amazonaws.com/prod/xray?url=http://wqad.com/weather/forecast/&selector='+encodeURIComponent('.entry-content>div:not([class]), .entry-content>p')+'@html',function(data) {
		if (data && data.content) {
			var html = '';
			for (var i=0; i<data.content.length; i++) {
				if (data.content[i].indexOf('Chief')>=0) { break; }
				html += '<p>'+data.content[i];+'</p>';
			}
			$('#wqad-forecast').html( html );
		}
	});
	$.get('https://8xd8ar771c.execute-api.us-east-1.amazonaws.com/prod/xray?url=http://www.kwqc.com/weather/&selector='+encodeURIComponent("#wxAccordion_forecast .media-body")+'@html',function(data) {
		if (data && data.content) {
			var html = '';
			for (var i=0; i<data.content.length; i++) {
				if (data.content[i].indexOf('smart phone')>=0) { break; }
				html += '<p>'+data.content[i];+'</p>';
			}
			$('#kwqc-forecast').html( html );
		}
	});
	$('.closings').each(function(i,el) {
		var url = el.getAttribute('src');
		$.get('https://8xd8ar771c.execute-api.us-east-1.amazonaws.com/prod/xray?url='+url+'&selector=h4,ul@html', function(data) {
			var html = '<div><b>'+data.content[0]+'</b></div>';
			if (data.content.length>1) {
				html += '<div><ul>'+data.content[1]+'</ul></div>';
			}
			el.innerHTML+=html;
		});
	});
	$('*[src][selector]').each(function(i,el) {
		var url = el.getAttribute('src');
		var selector = el.getAttribute('selector');
		var remove = el.getAttribute('remove');
		$.get('https://8xd8ar771c.execute-api.us-east-1.amazonaws.com/prod/xray?url='+url+'&selector='+encodeURIComponent(selector)+'@html', function(data) {
			el.innerHTML=data.content.join("<br>");
			if (remove) {
				$(remove,el).remove();
			}
			if (el.id && typeof post_process[el.id]==="function") {
              post_process[el.id](el);
			}
		});
	});
});
var post_process = {
  'kwqc_closings': function(el) {
    $('table',el).each(function(i,t) {
      try {
        sortTable(t);
      } catch(e) {}
	});
  }
};
function sortTable(table) {
  var rows, switching=true, i, x, y, shouldSwitch;
  while (switching) {
    switching = false;
    rows = table.rows;
    for (i = 1; i < (rows.length - 1); i++) {
      shouldSwitch = false;
      x = rows[i].cells[0];
      y = rows[i+1].cells[0];
      if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
        shouldSwitch = true;
        break;
      }
    }
    if (shouldSwitch) {
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
    }
  }
}
</script>
</head>

<body>
<img src="icon.png" style="float:left;height:96px;margin-right:20px;">
<h1 class="title">QC Weather Watch</h1>
<div class="subhead">Your one-stop place for all the Quad Cities weather news you need to know!</div>
<div style="clear:both;"></div>

<div style="background-color:#eee;clear:both;display:inline-block;border-radius:10px;padding-left:3px;">
	<iframe id="forecast_embed" type="text/html" frameborder="0" height="245" width="600" src="http://forecast.io/embed/#lat=41.492601&lon=-90.445976&name=the Quad Cities"></iframe>
	<div style="clear:both;"></div>
	<div class="block">
		<h3><a href="http://www.wqad.com/weather/" target="_blank">WQAD</a></h3>
		<div id="wqad-forecast" class="overflow" style="width:550px;max-width:95vw;border:1px solid black;padding:2px;">Loading forecast...</div>
		<br>
		<img src="https://newcdn.tribtv.com/wqad/5day.jpg" style="width:500px;">
		<br>
		<img src="https://newcdn.tribtv.com/wqad/Regional_Radar_640.gif" style="width:500px;">
		<br>
		Cancellations:
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_schools.html"></div>
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_biz.html"></div>
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_gov.html"></div>
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_other.html"></div>
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_church.html"></div>
		<div class="closings" src="http://s3.amazonaws.com/wqadclosings/wqad_dc.html"></div>
	</div>
	<div class="block">
		<h3><a href="http://www.kwqc.com/weather" target="_blank">KWQC</a></h3>
		<div id="kwqc-forecast" class="kwqc overflow" style="border:1px solid black;width:550px;max-width:95vw;padding:2px;">Loading forecast...</div>
		<img src="http://gray.ftp.clickability.com/kwqcwebftp/7dayFULL.jpg" style="width:500px;">
		<br>
		<img src="http://gray.ftp.clickability.com/kwqcwebftp/dopplergif.gif" style="width:500px;">
		<br>
		<img src="http://gray.ftp.clickability.com/kwqcwebftp/watchwarnFULL.JPG" style="width:500px;">
		<br>
		Cancellations:<br>
		<div id="kwqc_closings" src="http://www.kwqc.com/weather/closings" selector="section" remove=">div,>p,>ul,>a,>b,small"></div>
	</div>
	<div style="clear:both;">
	<img src="http://www.weather.gov/images/dvn/wxstory/Tab2FileL.png" style="max-width:575px;">
	<br>
  
	<h1>Iowa Road Conditions</h1>
	<img src="http://mesonet.agron.iastate.edu/data/iaroads.png"><br>

	<h1>Illinois Road Conditions</h1>
  <b>Inline road conditions unavailable.</b><br>View the IL road conditions map at <a href="http://www.gettingaroundillinois.com/winterconditions/">http://www.gettingaroundillinois.com/winterconditions/</a>
  <br><br>

  <h1>Traffic/Road Condition Cameras</h1>
  <img src="http://204.8.38.202/qc_snapshot/qctv08.jpg"><br>
  <img src="http://204.8.38.202/qc_snapshot/qctv10.jpg"><br>
  <img src="http://204.8.38.202/qc_snapshot/qctv03.jpg"><br>
	

	</div>
</div>

</body>
</html>


